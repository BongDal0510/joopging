<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.team4.joopging.mappers.MypageMapper">

    <!--플로깅 예약 목록-->
<select id="getReservationList" resultType="com.team4.joopging.mypage.vo.PloResVO">
    <![CDATA[
    SELECT ploResNum, memberNum, ploggingNum, reservationDate,reservationTime,reservationStatus
    FROM TBL_PLO_RES WHERE memberNum = #{memberNum}
    ]]>
</select>

    <!--구매 상품 목록-->
<select id="getGoodsOrderList" resultType="com.team4.joopging.mypage.vo.OrderHistoryVO">
<![CDATA[
SELECT orderNum,memberNum,goodsNum,goodsCnt,goodsColor,goodsSize,orderDate,
    recipient,recipientPhone,recipientZipCode,recipientAddress,recipientAddressEtc,
    parcelMessage,usePoint,orderStatus
FROM TBL_GOODS_ORDER WHERE memberNum = #{memberNum}
]]>
</select>

<!--상품 택배-->
<select id="getParcel" resultType="com.team4.joopging.mypage.vo.ParcelVO">
<![CDATA[
SELECT parcelNum, parcelCode, orderNum
FROM TBL_PARCEL WHERE orderNum = #{orderNum}
]]>
</select>

<!--찜 목록-->
<select id="getGoodsLikeList" resultType="com.team4.joopging.mypage.vo.goodsLikeListVO">
<![CDATA[
SELECT goodsLikeListNum, memberNum, goodsNum
FROM TBL_GOODS_LIKE_LIST WHERE memberNum = #{memberNum}
]]>
</select>

<!--플로깅 예약 취소-->
<update id="deleteReservation">
UPDATE TBL_RESERVATION
SET reservationStatus = 1
WHERE ploResNum = #{ploResNum}
</update>

<!--구매 취소-->
<update id="deleteGoodsOrder">
UPDATE TBL_GOODS_ORDER
SET orderStatus = 1
WHERE orderNum = #{orderNum}
</update>

<!--아이디로 멤버 번호 찾기-->
<select id="seletMemberNum" resultType="_int">
    SELECT memberNum FROM TBL_MEMBER WHERE memberId = #{memberId}
</select>

<!--멤버 정보 수정-->
<update id="updateMember">
    UPDATE TBL_MEMBER
    SET memberPw = #{memberPw}, memberEmail = #{memberEmail}, memberZipcode = #{memberZipcode}, memberAddress = #{memberAddress}
    WHERE memberNum = #{memberNum}
</update>

<!--멤버 삭제-->
<update id="deleteMember">
    UPDATE TBL_MEMBER
    SET status = 1
    WHERE memberNum = #{memberNum} AND memberPw = #{memberPw}
</update>

</mapper>